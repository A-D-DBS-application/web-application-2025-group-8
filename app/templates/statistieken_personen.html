{% extends "base.html" %}

{% block content %}

<!-- HERO -->
<section class="hero">
  <h1 class="hero-title">Statistieken per Volksvertegenwoordiger</h1>
  <p class="hero-subtitle">
    Bekijk over welke thema’s elk parlementslid het vaakst schriftelijke vragen stelt.
  </p>
</section>

<!-- TABEL -->
<section class="table-section">
  <div class="table-container">
    <table id="personenTable">
      <thead>
        <tr>
          <th onclick="sortTable(0)">Naam ⬍</th>
          <th>Populairst Thema</th>
          <th>Aantal Vragen</th>
          <th>2e Thema</th>
          <th>Aantal</th>
          <th>3e Thema</th>
          <th>Aantal</th>
          <th>Laatste Vraag</th>
        </tr>
      </thead>
      <tbody>
        {% if data %}
          {% for p in data %}
          <tr>
            <td>{{ p.naam }}</td>
            <td>{{ p.populair or "—" }}</td>
            <td class="td-center">{{ p.pop_count }}</td>
            <td>{{ p.tweede or "—" }}</td>
            <td class="td-center">{{ p.tweede_count }}</td>
            <td>{{ p.derde or "—" }}</td>
            <td class="td-center">{{ p.derde_count }}</td>
            <td>{{ p.laatste_vraag or "—" }}</td>
          </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="8" class="geen-data">Geen gegevens beschikbaar.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</section>

<!-- SORT SCRIPT -->
<script>
let sortDirection = [true]; // alleen 1 kolom om te sorteren

function sortTable(columnIndex) {
  const table = document.getElementById("personenTable");
  const rows = Array.from(table.rows).slice(1);
  const dir = sortDirection[columnIndex] ? 1 : -1;

  rows.sort((a, b) => {
    const A = a.cells[columnIndex].innerText.trim().toLowerCase();
    const B = b.cells[columnIndex].innerText.trim().toLowerCase();
    return A.localeCompare(B) * dir;
  });

  rows.forEach(row => table.tBodies[0].appendChild(row));
  sortDirection[columnIndex] = !sortDirection[columnIndex];
}
</script>

{% endblock %}
