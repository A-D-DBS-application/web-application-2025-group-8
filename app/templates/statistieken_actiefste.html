{% extends "base.html" %}
{% block content %}

<!-- HERO -->
<section class="hero">
  <h1 class="hero-title">Actiefste Volksvertegenwoordigers</h1>
  <p class="hero-subtitle">
    Ontdek welke politici uit jouw regio het meest bezig zijn met onderwerpen die jij belangrijk vindt.
  </p>
</section>

<!-- RESULTATEN EN FILTER -->
<section class="stats-container">

  <!-- FILTER -->
  <div class="card filters-card">
    <h2 class="section-title sub">Filter op thema en kieskring</h2>

    <form method="get" class="filters-form">
      <div class="filters-row">

        <!-- Kieskring -->
        <div class="filter-field">
          <label for="kieskring">Kieskring</label>
          <select name="kieskring" id="kieskring">
            <option value="">Alle kieskringen</option>
            {% for k in kieskringen %}
              <option value="{{ k }}" {% if geselecteerde_kieskring == k %}selected{% endif %}>
                {{ k }}
              </option>
            {% endfor %}
          </select>
        </div>

        <!-- Thema -->
        <div class="filter-field">
          <label for="thema">Thema</label>
          <select name="thema" id="thema">
            <option value="">Alle themaâ€™s</option>
            {% for t in themas %}
              <option value="{{ t.id }}"
                {% if geselecteerd_thema_id == t.id|string %}selected{% endif %}>
                {{ t.naam }}
              </option>
            {% endfor %}
          </select>
        </div>

        <!-- Knop -->
        <div class="filter-field filter-field-button">
          <button type="submit" class="btn">Filter</button>
        </div>

      </div>
    </form>
  </div>

  <!-- RESULTATEN -->
  {% if geselecteerde_kieskring and geselecteerd_thema_id and data and data|length > 0 %}

    <h2 class="section-title sub">Resultaten</h2>
    <p class="section-subtext">
      We tonen de meest actieve volksvertegenwoordigers voor de gekozen combinatie.
    </p>

    <div class="cards-grid">
      {% for r in data %}
        <div class="card vv-card">
          <div class="vv-rank" data-fractie="{{ r.fractie }}">#{{ r.rang }}</div>
          <div class="vv-content">
            <h3 class="vv-name">{{ r.naam }}</h3>
            <p class="vv-fraction">{{ r.fractie }}</p>
            <p class="vv-count">{{ r.aantal_vragen }} schriftelijke vragen</p>
            <p class="vv-meta">Kieskring: <span>{{ r.kieskring }}</span></p>
          </div>
        </div>
      {% endfor %}
    </div>

  {% elif geselecteerde_kieskring and not geselecteerd_thema_id %}

    <div class="empty-state">
      <h2 class="section-title small">Selecteer een thema</h2>
      <p>
        Kies eerst een thema om te zien welke volksvertegenwoordigers hier het meest actief rond zijn.
      </p>
    </div>

  {% elif geselecteerd_thema_id and not geselecteerde_kieskring %}

    <div class="empty-state">
      <h2 class="section-title small">Selecteer een kieskring</h2>
      <p>
        Kies eerst een kieskring om te zien welke volksvertegenwoordigers hier het meest actief zijn.
      </p>
    </div>

  {% elif geselecteerde_kieskring and geselecteerd_thema_id %}

    <div class="empty-state">
      <h2 class="section-title small">Geen resultaten gevonden</h2>
      <p>
        Voor deze combinatie van thema en kieskring zijn geen resultaten beschikbaar.
        Probeer een andere selectie.
      </p>
    </div>

  {% else %}

    <div class="empty-state">
      <h2 class="section-title small">Maak een selectie</h2>
      <p>
        Kies een thema en een kieskring om de actiefste volksvertegenwoordigers te bekijken.
      </p>
    </div>

  {% endif %}

</section>

{% endblock %}
